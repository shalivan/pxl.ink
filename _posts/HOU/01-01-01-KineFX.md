---
title: KineFX

categories:
 - HOU
tags:
- Houdini
- Animation
- SOP
description: Rigs, Animation, Retarget
permalink: /kinefx/
---


```
`rigstashpose` - create rest pos 4x4Matrix
edit rig:  
`delete joints`    
```
[SOP.hiplc](/src/hip/SOP.hiplc)   
[Unreal Animation](/uanim/)    
[Principles of animation](/animation/)   

---------

All working on world level on points. The parent-child relationship between joints in a hierarchy is determined by vertex order. However, point ordering is not considered when traversing the hierarchy.

- **Control Geo** - (name on primitive)     
- **Joints** - points (name on points) Point is joint when has transform attribute and name attribute  
 - `@name` unique per point   
 - `@P`  (3flt)    - handle world space translation
 - `@transform` (9flt - matrix) - (matrix3) rotation, scale, ...? .
- **Hierarchy** - poly line - define hierarchy of joints



<img src="/src/kine/d1.png" width="350">    






---

# Create (rig)   
Rig is separated (like shadow rig) hierarchy to control rig > clean for export   

<img src="/src/kine/c1.png" width="350">     


#### [Skeleton] SOP
Modify and Create ~skelet. Can control bone placement, rename bones, orient selected bones, a lot of shortcuts (`RMB` menu, `P` - details of joints).
- create @localtransform.  (with correct orientation)



#### [Rig doctor] SOP
- create missing @name  
- debug hierarchy
- init Transforms 

Skeleton from line: Any SOP polygonal line into a joint chain with the  Rig Doctor SOP node node (and later  with Skeleton SOP )

#### [Orient along curve] SOP
- create transform (3x3 transform), and tangent metod to next edge  

#### [Re-Orient Joints] SOP


[sidefx.com/docs/houdini/character/kinefx/skeletons.html](https://www.sidefx.com/docs/houdini/character/kinefx/skeletons.html#creatingskels)




---

# Controls

### IK
create controllers by deleting parts of skeleton

- fullbodyIK
- IkChain:
   - select  root mid and tip bones points
   - set! match by name

<img src="/src/kine/ik1.png" width="150">   

### Curve
<img src="/src/kine/curve.png" width="150">    



### VOP:
`rigattribvop` - chops and more stuff

#### VOPS
`lookatkinefx` -  
`lookat constraint` -  



---

# Capture (skin)
<img src="/src/kine/skin.png" width="350">   



- `BoneCaptureLine` - define capture regions @joints    
- `Tetembed`, create mesh weightings  
- `BoneCaptureBiharmonic`, transfers weights to skin   

change pose and `Capturelayerpaint` to paint  after biharmonic (po region name wiec troche odporne )

---

# Motion / Animation


Convert to **Motion Clip** - **[ Motion Clip ] SOP** -  see all frames at once  (not time dependent)   Enable to operat on neighbour frames  
Convert to **Animation** - **[ Motion Clip Evaluate ] SOP** -  time dependent Geometry caches One frame per frame.

## Animation

#### Root motion
- **[ Extract Locomotion ] SOP** -  extract root motion   


#### Mix Anims
- **[ Skeleton Blend ] SOP** - feed with 2 animations
- **[ Time Shift ] SOP**

## Motion Clips
All rigs at once. Way of dealing with motion, so for most tools `motion clip evaluate`.
One for frame, packed primitive with pack attrribute `time`

- **[ Configure Clip Info ] SOP**  

- **[ Motion Clip Cycle ] SOP**  
- **[ Motion Clip Extract] SOP**  - Extract Frames

- **[ Motion Clip Blend] SOP**  - kitbash 2 files.
Can delete some bones and apply animation for a part
---
# Retarget
Rig Match Pose  
Map Points   


Retarget   
`rigmatchpose` -  
`map points`-  
`fullbodyik` -  
`fktransfer` -  
`skeleton blend` - i.e. fullbodyik/fktransfer



---

# Rig Wrangle

`rotate(3@localtransform, @Time, {1,0,0});`


# Rig VOP

twoboneik
lookatconstraint
parentconstraint

---

# Repair
`realistic shoulder` -        
`reverse foot` -   
`stabilize joints` -   select joints to stabilize,

---


# To Unreal

90+- ?  how to position anim and where is save to rotate ?????

control rig - manipulating bones transforms   
animation graf - blending , playback  

https://vimeo.com/rokandic


---

https://www.tokeru.com/cgwiki/index.php?title=HoudiniKinefx


-----------
crowd  
Agent from skeleton
