---
title: LAB

categories:
 - HOU
tags:
- Houdini
description:
permalink: /lab/
---


# VAT 3

- Two additional triangles - > bounds of sim  > frame nr , padding ratio in @P data  embedded in the bounds of the static mesh and automatically derived at runtime.
- 2 uv channels (16 bit depth) instead of vert color to store Pivot pos.
- accuracy modes. (more memory intensive)


### Global Options

- `Input Geometry Is Cached to Integer Frames` - Set this according to whether or not the input geometry is cached to integer frames and loaded from disk.
- `Texture Format` - typical NonHDR. HDR - offers better precision for all the data you are exporting. Only EXR and TIFF support HDR.
- `Split Positions into Two Textures`  Uses 2 x 8-bit textures for better precision when the target engine does not support 16/32-bit HDR textures.
- `Export Spare Color Texture` - Spare Color Texture attribs **point** `@Cd2` and the point float attribute `Alpha2`. (for second set of animated colors). Color Texture is designed to be a multi-purpose texture whereas Spare Color Texture is more of a pure color texture. But of course, you can still write non-color data
- `Export Static Mesh Vertex Colors` - Use vertex color. Create attrib on **vertices** `@Cd_v` and `@Alpha_v`
  - Dynamic Remeshing (Fluid) mode does not have the concept of static vertex colors,
  - Particle Sprites (Sprite) mode only exports static vertex colors if they exist on the geometry from Custom ZX Shapes.
- `Include Hidden Debug Plane in Geometry` - It is recommended to turn this on.

### Custom Attributes

- `In Position Alpha` - Attribute to export through `Position Texture's alpha` channel. This attribute can have any **non-negative values**, including values above 1.0, even when using non-HDR texture formats. (*But in order to support this, negative values are not allowed*)
- `In Color` - Attribute to export through `Color Texture's RGB` channels. This attribute does not undergo any transform, conversion, or normalization. If the attribute has values outside the 0-1 range, set Texture Format to "HDR". If you have to use a non-HDR texture, you can pre-normalize the attributes in the input geometry and manually reverse the normalization in the real-time shader.
- `In Color Alpha` -  Attribute to export through `Color Texture's alpha` channel. Range 0-1



### Advanced

- `Allow Splitting Positions into Two HDR Textures`- Override that restriction.
- `Allow Exporting Real-Time Data JSON File (Legacy)` - To support real-time instancing the instance transforms may corrupted the embedded data
- `Support Real-Time Instancing` -   Turn this on to support real-time instancing of your vertex-animated mesh. Currently this parameter only makes a difference if *Target Engine* is set to "Unreal Engine". In Unreal Engine, instanced meshes' local-space tangents are not directly accessible, so when *Mode* is set to "Rigid-Body Dynamics (Rigid)", the tangents have to come from the vertex attributes "uv5" and "uv6".

.

- `Crop Textures to First Frame Only` - Crops the output textures so that they only contain the first frame's data. (When this is on, *Pad Texture Size to Powers of Two* is ignored.)  This is useful in the real-time shader when you want to use a small texture to look up certain first-frame data regardless of the current animation progress. In Dynamic Remeshing (Fluid) mode, only Lookup Table Texture will be cropped, as the rest of the textures in this mode are not generated in a way that the first-frame data can be easily isolated.
  - `Preserve Raw Float Data in Position Alpha` -  Only applicable when *Crop Textures to First Frame Only* is on. The point attribute "pscale" or any custom float attribute in Position Texture's alpha channel, by default, is encoded in a special way to allow the packing of additional information. Turn this on to disable the special encoding and to store the raw input float data in this channel. This way, when you access Position Texture's alpha channel in the real-time shader using a custom setup, you do not need to know how to decode the data. (This parameter has no effect on compressed normals, as they are not float data.)





### LOD
Exports a single FBX containing multiple LODs and a single set of textures compatible with all the LODs.  
All non-zero LODs simply share LOD0's textures through point-mapping (described below in requirement 1), so adding more LODs does not increase the texture memory consumption.

- `Number of LODs` - The number of LODs to export. At least this number of LODs must be present in the input geometry.

Geo Requirements
- All LODs must have the integer **point** attribute `@lod0_ptnum`. This attribute maps all the points in every non-zero LOD to a subset of points in LOD0, enabling subsequent LODs to share the point data exported with LOD0.
  - In Rigid-Body Dynamics (Rigid) mode, this attribute should be on **packed points**.
- In each LOD, all the points must be assigned to the respective point **group** `lod#` with `#` being the LOD number starting with 0.
  - In Rigid-Body Dynamics (Rigid) mode, this group should be on packed points instead of points.
- All LODs must already have the desired `UVs` and `normals` on **vertices** this node cannot reliably auto-generate missing UVs


### Advanced Developer Options

- `Convert to Image Format Colorspace` - Image data in COPs is always linear. When writing to image formats that are not linear (sRGB, for example), this will convert the colorspace to preserve the look of the image. An 8-bit format that has an unspecified colorspace is assumed to be sRGB.
- Raster Depth:  
    The byte format of the image. Higher bit depths provide better color resolution and range at the expense of memory.
    - *8 Bit Integer*:  banding can occasionally be seen; suitable for video.</p>
    - *16 Bit Integer*: intermediate bit depth; no banding can be seen, though clipping can still occur below and above the black and white points.</p>  
    - *32 Bit Integer*: generally not used for color, 32-bit integer values are used to store object IDs, counts, and other integer values with a large range.</p>
    - *16 Bit Floating Point*: high bit depth; no banding can be seen, and no clipping occurs at white and black; uses less memory than 32-bit float, however processing time for this format is slightly higher as it is not a native CPU data format; this format supports values in the range -65504 to +65504.</p>
    - *32 Bit Floating Point*: high bit depth; no banding can be seen, and no clipping occurs at white and black; uses 4 times as much memory as 8 bit, which is this formatâ€™s main drawback.</p>


Black/White Points:
        The integer formats (8, 16 and 32 bit) can specify the raw values that the black and white points occur at. The white point must always be higher than the black point. The minimum and maximum values for the black and white points for each format are:
    - *8 bit*   :   0 - 255
    - *16 bit*  :   0 - 65535
    - *32 bit*  :   0 - 2,147,483,647
Floating point formats always have their black point at 0 and their white point at 1
    BC 4-Channel Split:
        Renders the channels separately for different data formats.
    Render With Take:
        You can optionally turn this on if you are working with takes.



### Support for ISM & HISM
also mesh particles or 4h2 ?
    - H: support real time instancing  checkbox
    - H export tab: Include: geo, pos, rot , col / realtime data
    - U: import data table, support table  check
    - U: use scripted action under RMB


### Motion blur
Normal Texture is deprecated and replaced by Rotation Texture describes both normals and tangents.
Position Texture 2 and Spare Color Texture are not directly enabled/disabled here. They depend on parameters in the *Settings* tab.
you cannot export Position Texture 2 without Position Texture 1, and you cannot export Spare Color Texture without Color Texture.


---


## Soft

### Position alpha vs. rot texture
-  `Rotation Texture` rot tex as quat to heve add normal. tangent space nm > (tangent data to shader, with only normal they can spin around nm. (rotation texture (tan + nm ) added  as quaternion (can describe both degrees of freedom simultaniousley using 4 not 6 chanles)))
- `Export Compressed Normals in Position Alpha` - lossy compression resulting in medium-quality normals. more memory-efficient alternative as it bypasses the cost of sampling Rotation Texture.



---

## Dynamic
Flud potentially remeshed every frame
Dynamic Remeshing (Fluid) mode requires you to render output files in two separate passes !!!!!
After the first pass is complete, change this to "Second Pass" and press *Render All* again.
- **First Pass** - renders Geometry, Lookup Table Texture, and optionally the Real-Time Data JSON file / the Unity Material file.
- **Second Pass** - renders the animation data textures (i.e. Position Texture, Rotation Texture, Color Texture, etc.), which are much smaller in size than Lookup Table Texture.

```
- **Preview Texture Size** is on, this parameter decides which pass's texture size to preview.
```

### Fuse
Turn this off if you do not want to fuse any points.
- **Fuse Point Group** - point group that will be affected by fusing. Points will be fused together if they are within the distance threshold set by *Fuse Distance*. You can also use the `!group_name` or `* ^group_a_name ^group_b_name` syntax to exclude certain groups. When this parameter is blank, all points will be affected.
- **Fuse Distance** - Fuses together points within this distance to one another in the input geometry. This helps to remove tiny triangles that are a waste of resources and potentially problematic.

### Position alpha vs. rot texture
- `Export Compressed Normals in Position Alpha` - Compresses vector to the float type and stores them in `Position Texture's alpha channel`. Lossy compression resulting in medium-quality normals. it bypasses the cost of sampling Rotation Texture.
 - In Unreal material:
   - U: Check export compressed normals in position A
   - U: Internal use compressed normals

### Uv's
Can UV generation method specified on the *Input* tab.
- `Export Surface UVs in Position Alpha and Color Alpha` - Exports the animated UV attributes through `Position Texture's alpha channel` and `Color Texture's alpha channel`.
- `Export Surface UVs in Color Red and Green` - Exports the animated UV attributes through `Color Texture's R` & `G` channels.   

---

## Rigid
Packed pieces with RBD simulation data. small textures !

#### Accuracy of the pivot
Determines the accuracy of piece translations and rotations
- **High** use if vertex shader is a performance bottleneck; uses `two 16-bit UV channels` to store unencoded pivots; the overall cheapest option
- **Very High** recommended; uses `two 16-bit UV channels` to store encoded pivots; deploys two split-encoding formats and dynamically pick the better format for each piece, producing an accuracy very close to that of "Maximum" at only half of the latter's memory footprint; costs more vertex shader instructions.
- **Maximum**  uses `two 32-bit UV channels` to store unencoded pivots;  (*Use Full Precision UVs* in Mesh Editor). Because Rigid-Body Dynamics (Rigid) mode requires 4-6 UV channels on the exported mesh, turning on Use Full Precision UVs doubles the memory footprints for all of them.

#### Rotation Interpolation
- **Accurate Multi-RPF Slerp with Angular Velocity** - Default. allows you to freely dilate time in real-time playbacks & multi rotation. Use unless no `@w` If your input geometry comes from a RBD simulation, angular velocity is directly available.  `@w`- point attrib. (angular-velocity-assisted spherical linear interpolation (slerp) algorithm to fairly accurately interpolate rotations of fast-spinning pieces)
- **Basic Short-Path Slerp without Angular Velocity** - uses the standard short-path spherical linear interpolation (slerp) algorithm.


#### Support Smoothly Interpolated Trajectories:
- This requires you to export `Color Texture` and set Texture Format to `HDR`.
    It recomputes accelerations and exports them through the RGB channels of `Color Texture`. Using accelerations, the shader can reconstruct curved interframe trajectories in a more realistic way which take velocites into account, instead of constructing straight paths to connect adjacent-frame positions.  

#### Edge Case Handling     
- Max RPF Allowed - `50`   Limit revolutions per frame ( too high may affect the accuracy of the rotation interpolation for all pieces due to floating point precision limitations )
- Slerp Edge Case Offset - (Do not set this value too low, or the real-time shader may suffer from numerical errors. )
- Slerp Edge Case Seed - generating random degrees by which to rotate edge-case pieces. (extremely unlikely that you will need to change this parameter. Only change it if the node displays an error message that asks you to do so.)


### Color
Other name for VErtex color `cd_v` ?

### Rigid not from sim
- not throu solver , njo rdb data : orient, pivot
Use transform pieces:
- packed pieces:
 - first frame `freez` (ref)
 - `extract transform`
 - `transform pieces`. Attribute to copy: `pivot, orient`

### Piece scale multiply
- by vector
- can scale by velo with `MF_TransformVelocity` (localspaceVeloInUnreal Out) > (localspacePieceScaleMultiplayer) in `FM_VAT_RigidbodyDynamics`


---



## Particle


- `Support Particle Interframe Interpolation` - Arrange data on the output textures to make it possible to interpolate particle attributes in real time. This requires the input geometry to have the point attribute `@id`.

### Card Shape
- `Custom ZX Shapes` - Replaces the default shape options with your own designs. The custom shape geometry has to be flat on the ZX plane. You can merge multiple shape variants together and point this parameter to the path of the combined geometry. See the tooltip of Multiple Shape Variants with Shape ID Attribute.
- `Shape Input Type` - The custom shapes can either be filled polygons or simply outlines defined by closed curves with no interiors. The hollow outlines will be automatically filled. For performance reasons, consider using a Fuse SOP to reduce the number of points used to define the input custom shapes.
- `Multiple Shape Variants with Shape ID Attribute` - When you merge multiple shape variants together (because Custom ZX Shapes only accepts one geometry path), they can still be uniquely identified if you assign each shape a unique shape ID value.
- `Shape ID Attribute` - A point or primitive integer attribute to distinguish different shape variants.
- `Shape Weight Attribute` - A point or primitive float attribute to determine the distribution of the shape variants. Each variant's likelihood of adoption by a particle is this variant's weight divided by the aggregate weight of all variants.
- `Preserve Relative Scales of Different Shapes` - Preserves the relative scale differences between multiple variants. Turn this off if you want to scale (the width-to-height ratio will be locked) different shape variants to have the same bounding square size.
- `Reverse Custom Card Normals` - Turn this on only if the particle cards have the wrong normals in your real-time engine, in which case, they may appear to be invisible but if you select the object, you can see the outlines. This is unlikely to happen, however.

### Looping particles
- make loop SOP > last frame shorter
- can spin with nm
- steer by velocity  (export velo and apply )


---



# Pivot Paint

# Houdini Niagara

Particle ID, age, life


# Impostors:

- camera rig
- ROP impostor


# Flipbook


# Flow Maps


# Bake

# Motion Vectors

# ROP Vector fields

# ROP Volume Textures
