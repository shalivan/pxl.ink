---
title: NAS
description:
categories:
- NET
tags:
- NAS
- Network
permalink: /nas/
---







# [Synology DSM](https://kb.synology.com/en-ca/DSM/help/DSM/AdminCenter/file_winmacnfs_win?version=6)

Disk Station Manager
- Hardware> Power > Wake on LAN (WOL) - need to send package (magic packet need be send)    
- *storege pools* - all dysc storage available / *volume* - live on storage pool

---


# Communication


#### File Station
- Application on NAS DSM
- Share files from: RMB - to share files
   - to specyficusers
   - external users with pass

#### SMB
- File server
- `Enable Transfer Log` - record operations in log  
  (Server Message Block)  SMB/CIFS (samba for linux) - file storage  << wounrable to encryption attack (NFS vs AFP vs iSCSI - other protocols)
-   DONT OPEN SMB PORTS ON ROUTER !!!! https://youtu.be/mwo1dpYkq6U

#### Synology drive
- Google like, backup, folder sync, versioning , work toghether - Desktop App
- older is cloud ....sth ?

cloud station ? ? vs synology drive ??

https://kb.synology.com/en-sg/DSM/tutorial/Differences_between_Synology_Drive_and_Cloud_Station
#### QuickConnect
- naokoło szukanie plików - przez *quick connect*
- sciaganie duzych pakietów wolne


#### Map network drive
- enable `WS-Discovery`
  - Map as **network drive** - as a disk  
  - Add from **Network** places >   
  - type **//NAME** in explorer

#### SSH
- `ssh root@192.168.0.xxx -p xxportxx` - to ssh to machine
- `id root` -

RSA key authorization - nad security for ssh

---

# Accounts
Premotions/users

- `LDAP` - (active directory - windows version more complex but need if want login credential)
  - static ip
  - dns record pointing to it. (fully qualified domain not ip) with `DDNS`
//>   - point a record > local static > not throue net .
- `Directory server` - add domain and set nas as domain controler
    - can add users and computers.
    - IN WINDOWS: configure network and shering > properties: tcpipv4 & use following dns server adress
    - Rename pc
- `cloud identity `?? > secure as a service easy to setup Landscape
    - [YT folder permisions](https://www.youtube.com/watch?v=Hl783Z0Ri6M)
- `OpenID Connect` -
- `OOS` - single sign on
-------

# C2
- pass
- backup  - drozsze 3,5 E - 10E (500mb-2t)
- storage - dla nasa  5.99 / 7E month 1T
- identity - need domain  `C2 identity` - permisions, group permitions, custom scrppt, support LDAP on local (within docker)

##### Backup
Version control if snapshots enabled

----





# Share media

`DLNA` - Media server - need application. podobno powszechny


#### privileged access management synology

add user in dsm    

ACL - acces control  entery list- user or group acces to object




C2

# Security
SECURE NAS: https://bpmsg.com/how-to-make-your-synology-disk-station-nas-more-secure/


# Setup

CMS - central manage multiple NAS devices

------


# Houdini
Edit houdini env file to get access to NAS files:    
```
HOUDINI_ACCESS_METHOD = 2
```
https://aricodes.net/posts/perforce-server-with-docker/
https://hub.docker.com/u/adambryla
https://github.com/hawkmoth-studio/perforce-docker
https://hub.docker.com/r/hawkmothstudio/helix-p4d


# Self Hosted

#### notes
https://github.com/outline/outline  
https://www.wiz.cn/xapp




### Perforce

https://forums.perforce.com/index.php?/topic/3330-perforce-on-synology-and-unreal-engine-4/

...


Install
- helix pobrany:  p4d (dla linuxa 64) pobiera zzipowane archiwum z plikami
- `p4_start.sh` - skrypt do uruchamiania / instalacji
- Instalation script run:
   - ssh & `cd` to p4 catalog
   - `./p4_start.sh start`


Restart
- Restart
   - `cd /volume1/xxx/data/p4`
   - `./p4_start.sh start`  
- Check if running
      - `ps` wyswietla procesy sytemowe
- Kill process
      - `kill -9 xxxPIDxxx` < # 9 = kod sygnałyu SIG TEMINATE   


```bash

#!/bin/sh
#
#
# Startup/shutdown script for Perforce
#

# Source function library. this is where ‘daemon’ comes from
#. /etc/init.d/functions

prog="Perforce Server"

p4d_bin=/volume1/xxx/p4d
p4_bin=/volume1/xxx/p4
p4user=p4admin
p4authserver=p4authserver:1678
p4root=/volume1/data/p4
p4journal=/volume1/xxx/journal
p4port=1678
p4log=/volume1/xxx/log
p4loglevel=3

export PATH=/volume1/xxx/:$PATH
export P4PORT=1678
export P4USER=p4admin

start () {

# start

#If you wish to use a perforce auth server add this into the below command line.
# -a $p4authserver

# /bin/su $p4user -c “$p4d_bin -r $p4root -J $p4journal -p $p4port -L $p4log -v server=$p4loglevel -d” &>/dev/null
$p4d_bin -C1 -r $p4root -J $p4journal -p $p4port -L $p4log -v server=$p4loglevel -d
}

stop () {
# stop
echo Stopping $prog:
$p4_bin -p $p4port admin stop
}

restart() {
stop
start
}

case $1 in
start)
start
;;
stop)
stop
;;
restart)
restart
;;
*)

echo "Usage: ./p4_start.sh {start|stop|restart}"
exit 3
esac

exit $RETVAL
```








===================================================
==================================================

Errors:   
- If problems during instalation add variable: `export P4PORT=1666` (w konsoli nie wie z czym sie połaczyc bo zmienne typu $P4 port sie nie zapisują)
- test P4: reconcile /

ustawic 1 admina na p4Admin
konta dla programistów i nieprog

new file > depot - type stream
new group - mandala  

new users
- mr.robot
- deveolper
- admin

consola:
p4 set P4PORT=connect.mothdev:1678
P4 set P4USER = admin
p4 set P4PASSWD=123
p4 set


- mapa:
p4 typemap

l - log - musisz wyczekoawc zeby edytowac
w - do wszystk
sw - bes hostroii

ze
p4 configure set  reconcile - sm.status.matchlines=0


=========================

new workspace

Stream new stream  type r virtual - used to narrow space
from mandala
location: //mandala/mandalacode
add to ignore


advandced add to ignore
\
2 stream tez wirtual dla content
jurnal - plik w p4 ktory puchnie mozna go usuwac poprostu
