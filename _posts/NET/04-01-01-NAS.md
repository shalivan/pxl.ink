---
title: NAS
description:
categories:
- NET
tags:
- NAS
- Network
permalink: /nas/
---






# [DSM](https://kb.synology.com/en-ca/DSM/help/DSM/AdminCenter/file_winmacnfs_win?version=6)

Disk Station Manager
- Hardware> Power > Wake on LAN (WOL) - need to send package (magic packet need be send)    
- *storege pools* - all dysc storage available / *volume* - live on storage pool

---

# Communication


#### File Station
- Application on NAS DSM
- Share files from: RMB - to share files
   - to specyficusers
   - external users with pass

#### SMB
- File server
- `Enable Transfer Log` - record operations in log  
  (Server Message Block)  SMB/CIFS (samba for linux) - file storage  << wounrable to encryption attack (NFS vs AFP vs iSCSI - other protocols)
-   DONT OPEN SMB PORTS ON ROUTER !!!! https://youtu.be/mwo1dpYkq6U

#### Synology drive
- Google like, backup, folder sync, versioning , work toghether - Desktop App


#### QuickConnect
- naokoło szukanie plików - przez *quick connect*
- sciaganie duzych pakietów wolne


#### From Windows
- enable `WS-Discovery`
  - Map as **network drive** - as a disk  
  - Add from **Network** places >   
  - type **//NAME** in explorer

#### SSH

- ssh `ssh root@192.168.0.186` / `ssh root@192.168.0.186:5001`    
- `id root`   
https://www.youtube.com/watch?v=2xfBpN9fHuM
https://www.youtube.com/watch?v=cYQqXpO559g&t=7s


---

# Network

- modem - establish dedicated connection. Comuter digital sygnal - from internet analog - modulate sygnal
- router - after modem
Ethernet vs Wifi


- **DNS** - dynamic name server. Convert name to ip adress (DNS using port 53)
- **DDNS** - (Dynamic Domain Name Service) track external id by domain name if static ip not availabe. (services like: no-ip / dynu / Dyn)
- **DNSSEC** -  is therefore a security measure which is additional to a site's SSL certificate.

## IP

- Link-local IPv6 Address . . . . . : fe80::5c06:b938:7e5a:8fa9%9
- IPv4 Address. . . . . . . . . . . : 192.168.0.x   - lokalne ip urządzenia
- Subnet Mask . . . . . . . . . . . : 255.255.255.0
- Default Gateway . . . . . . . . . : 192.168.0.1   - powinien pokazywac na router
- Subnet mask 255.255.255.0


## DHCP

- Set up in `Network > Netowrk Interface > Ipv4`  or in the router  

### Protocols
- .
||Reliability|Package transfer method|Error detection|Congestion control|Acknowledgement
|-|-|-|-|-|-|
TCP (Transmission Control Protocol) for P4 |High / Slow |in a sequence|Y|Y|Y  
UDP  (User Datagram Protocol)  |Lower / Faster | in a stream|N|N | checksum



### Ports

- [Docs](https://kb.synology.com/en-us/DSM/help/DSM/AdminCenter/connection_public_access_advanced?version=6)  
- [Ports list](https://kb.synology.com/en-us/DSM/tutorial/What_network_ports_are_used_by_Synology_services )      
- https://youtu.be/STlKmQE5luM  PORTS FOR  OTHER APPS

### uPnP
Easy internet

### Port Forwarding
- Ta funkcja pozwala na skonfigurowanie usług w sieci lokalnej takich jak serwery WWW, serwery FTP, serwery poczty e-mail etc. w sposób umożliwiający ich osiągnięcie z sieci internet
  - https port forroward on router! - technilay open acces for world  
  - must firewall use !!!! ------------- can do safely !!!!! but be careful
  - change port > login portal > https from 5001 to sth def. !!!!!


## DDNS

### 1. Alias provider
- Set up for domain - Add A / AAAA - record to let google know  
  - using **DNSSEC**
  - get user / pass credentials
- **Name Servers** -
- [Google](https://support.google.com/domains/answer/3290309?hl=en-GB) example


### 2. Synology
- ##### DDNS [docs](https://kb.synology.com/en-us/DSM/help/DSM/AdminCenter/connection_ddns)
  - **LetsEncrypt** - **SSL** (https) certificates (not self signed) allow to encription but can be spoofet if public and private key is known.

- ##### Router Configuration
  - port forrowarding settings


### 3. Router Settings
- Settings
  - IPv4 / v6 (tuneling) - (Ip / brama domyslna)
  - **DHCP** - router adress pool (pisze przy wtycznach do lanu)  jak przydziela adresy IPv4.
  - **UPnP** - protocol (Universal Plug and Play ) Configure UPnP port forwarding - MUST BE ENABLE FOR SYNOLOGY
- ###### Port Forrowarding
  - Ustaw na routerze numery portów do przepuszczania.
  - Synology gateway ip adress of the router  if not Network > general > Manualy configure
    https://kb.synology.com/en-us/DSM/tutorial/What_network_ports_are_used_by_Synology_services
- ###### Filtering
  - filtrowanie / block  by MAC
  - filtrowanie portów i IP
  - zapora sieciowa
  - wyzwalanie portów
- #### Gateway
  - Urządzenia musi wskazywać na ip routera




----



## DNS
- . https://youtu.be/knD5TjXGBqA  


---

## Records

- `A` / `AAAA` - DNS (for pi 4 / 6)    
- `MX` - Mail server  https://support.google.com/domains/answer/9428703?hl=en   
- `CAA` - SSL cert     
- `CNAME` - Alias (only for subdomains)  for main >>> radirect     

### SSL Certificate

1. get domain
2. turn on ddns `External Acces > DDNS > Add`
     - domain name
     - user and pass  to configurate:
4. Open port 80:80 on router or by synology External Acces > Router Configuration setup.
5. `Security > Certificate`
      - full domain name  tahnt can be resolved into ip
      - adress
6. Instal DNS Server
      - https://youtu.be/daIelVuKlYQ?t=558 - dns
      - https://www.youtube.com/watch?v=5RYYI6ax8iI - ddns   


---


# Network Secure
Direct attack (by port or vonurability), indirect attack (smb share or other share)  

0. No Acces / local only
1. VPN
2. Port Forrowarding
3. Proxy....
   (firewall?)
- recent version of the software *updates*
- `2fa` - something they know and something they have. - good to use 2 account with 2 authy ..
- *separate admin account* and disable default admin
.
- keep `encription` on folders  -  easiest store in synology and have own copy OR:  keys on flash drives
.
- `SSH` - close if possible, easier to bruteforce pass rather throu dsm login portal. Shh have no 2fa
- `Auto Block`
    - login atempts in minutes, help with ssh
    - + notification if someone is blocked

---

### VPN
Most restricted, all devices must have cert!!
  - can open one port and creat tunel
     - user name / pass / certificate
     - `L2TP/IPSec PSK`    /   `PPTP`
https://youtu.be/5RYYI6ax8iI?t=365
https://kb.synology.com/en-sg/SRM/help/VPNPlusServer/vpnplus_server_webvpn?version=1_2
https://youtu.be/6gCdaHaEuao

---

### Firewall
ssh with firewal https://youtu.be/BCCIMRbAUp8

what is https://youtu.be/G3BJo4B1GgU

- filter trafic
- port ffd opens a port to one internal device.
- synology cal filter internal and ext trafic

### Port Block

https://youtu.be/JMEjeBBgHO4 - security nas   


### TLS

SSL is a cryptographic protocol that uses explicit connections to establish secure communication between web server and client. TLS is also a cryptographic protocol that provides secure communication between web server and client via implicit connections.

----------------------------------------------------
### Local network

PPPoE - over cable     
LAN -      
What is Carrier-grade NAT (CGN/CGNAT)?    
IPv6 Tunneling

# Serwers rest
- LDAP - lot of read no write serwer - (lightwawe directory acces protocol) - over ip - (def use tcp)
- DLAN
- `Telnet` is an application protocol used on the Internet or local area network to provide a bidirectional interactive text-oriented communication facility using a virtual terminal
- AD (active directory)


# Data Secure

- snapshot  1. *btrfs* / *snapshot*
- backup



# Website
Need:
- dns adress, (like on google domain )
- port forroward in router  
   - cgnet / Carrier-grade NAT (CGN or CGNAT) - CANNT SETUP

1. external acces ddns -
-

web station
video station
vebfav server

# Accounts

permitions users

AFP
DSM
FTP
SFTP
Universe

https://www.youtube.com/watch?v=Hl783Z0Ri6M
https://www.youtube.com/watch?v=Hl783Z0Ri6M

------

# Houdini

ENV file:       
`HOUDINI_ACCESS_METHOD = 2`
