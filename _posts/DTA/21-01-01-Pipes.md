---
title: Pipes

categories:
 - DTA
 - HOU
tags:
- CG
- Configs
- Pipelines
- Data
description: Pipelines
permalink: /pipes/
---
dobrze nazwac materiał  bo potem substance i exporty z substanca korzystają


- $HIPNAME -
- geo_node - 1 object  (nie uzywać obj bo sie nie da modyfikować, sop hda lepsze)




# Projects
- Keep things toghether.  single source of truth. < one place to keep data / docks / bugs
- Build modular - Create libraries - library files &  - asset files. USD
- Itterate faster - simplicty > speed >  quality > innov.


Setup:

- Scale:
  - set up scale and orient
  - transform for: copy to points pivot / bake parts separation. (rest)
- Texel density
  - second uv
- Time:   
  - FPS rate in software's
  - Sub steps / Sub time in solvers
- Names
  - divide to parts textures: by type
  - kazdy model = subtool = hou_node =




Bottlenecks:
- Switching paradigms (tools and workflows)
- Exporting / Importing files
- Not standardized naming conventions

### Enviroment

[NAME] _ [part] _ [subpart] _ [_scele (tiny/small)] _ [version] _ [verison low/mid/... ]

- $HIP/obj/`opname("..")`/out/$OS.fbx  
- $HIP/obj/`opname("..")`/cache   
-
- `$JOB` - na Content zeby moc samplować cały projekt
- `$HIP/$HIPNAME.hip`  
- `$HIP/raw/` - Sources     
- `$HIP/ref/` - References       `.pur`
- `$HIP/obj/ObjectA/` (moze byc duzo assetów albo asset per geo_node) / GEO OBJ SOP
  - `/out/`
    - `v1/w0/fileA_lo.fbx` / `fileA.fbx` - main file complexity
    - `v1/w0/fileA_mid.fbx` -  main file complexity
    - `v1/w0/fileA_locage.fbx` - cage for bake
    - `v1/w0/fileA_lod1.fbx` - LOD  
  - `/geo/`
    - `fileA.ztl` - Tool (ctrl shift T)  
    - `fileA_hi.fbx`-
    - `fileA_bakehi.fbx`- bake high
    - `fileA_paint.fbx`- bake from high and paint settings
    - `fileA/fileA_channel.png` - < NAZWA Z SHOP_MATERIAL         
    - `/niagara/` -     
  - `/cache/`  
  - `/img/`
  - `/mat/`
    - `fileA.sbs` - Substance     Designer / Painter          
    - `fileA.png` - Export    / in same folder as  spp/sbs   
  - `/old/`
  - `/hda/`

PATHS:

- $HIP/obj/`opname("..")`/out/`details(0,'name')`.fbx

### Sufixes

  - **Mesh Parts** - A B C D
  - **Version** _01
  - **Maps Channels**
  - diffuse (2.2) / albedo `cd`
  - opacity `a` / alpha (fill) `a`
  - roughness `rg`
  - specular `sc`
  - metallic `me`
  - normal `nm`/ worldnormal `wn`
  - ao (2.2) `ao` / `bn` bent normal
  - thickness `th`
  - curvature `cv`
  - height (range EXR) `h`
  - position `p` /  world position `wp`
  - materialid `id`

.
- [Comon Resolutions](/res/)

# I/O

# Hou attributes
- prim`s@shop_materialpath`
   - Unreal: Material name.
   - Painter: **textures set**  cannot paint across different meshes in painter
   - Zbrush: ??Polypaint  ?? groups / colors <  mask in painter
- prim`s@name`  
   - Zbrush: Subtool  
   - Painter: Separated obj in painter Bake by mesh // - `@name` prim - mesh **name** ! can bake by mesh name !!!
   - Unreal - `s@name`prim = `UCX_assetName_00`   
- HEngine
   - prim `s@unreal_input_mesh_name`
   - detail `i@unreal_nanite_enabled = 1`;



||| Hand / clockwise |Vector conversion formula | Quaternion conversion formula|
|-|-|-|-|-|
<img src="/src/pipe/axies_gl.png" width="100">| Houdini, Maya, Substance, Modo, Godot,. Marmoset, Open GL | R Y-Up / X>Y>Z | XYZ | XYZW
<img src="/src/pipe/axies_blend.png" width="100">|3ds Max, Blender, CryEngine, Auto Cad, Source, SketchUp | R Z-Up / Z>Y>X |   X,-Z,Y |  X,-Z,Y,W
<img src="/src/pipe/axies_dx.png" width="100">|Unity, ZBrush, Cinema4D. LightWave, Direct X  | L Y-up / Y>Z>X | -X,Y,Z | X,-Y,-Z,W
<img src="/src/pipe/axies_u.png" width="100">|Unreal | L Z-up / Z>X>Y | X,Z,Y | -X, -Z,-Y,W

- ZBrush vs Houdini: +X in zbrush = -x in houdini
- +X in zbrush = -x in houdini /   - Z+ is front

Transforms:
- H to Reality capture:  x:`+90` y:`+90` to fbx.

---

# Gaea
to HOudini >> .exr / .png
(raw dont work as heights)
# Houdini Import

- SOP Character FBX Import - keeps textures hierarchies blendshapes cameras
- SOP File - fastest
- Labs FBX - slow like file menu import


<img src="/src/pipe/export_hou.png" width=300>
<img src="/src/pipe/export_hou2.png" width=300>

### Collision

##### Sop level

- `s@name`prim = assetName   
- `s@name`prim = UCX_assetName_00   

##### Object level
- `UCX_*` - from houdini need to be in separated containers  named UCX_nameOfGeoContainer. - object level  (make container !!! and ROPnet > fbx)  

---




# Painter
- single texture sets !!!!!! with multiple materials
https://youtu.be/KbP7Pp2UeR4?t=975

- maski / vertex color ?
    - maski
    - bazowy kolor ??? raczej niepotrzebny


#### Hou to painter
##### UDIMS

##### tile within same



<img src="/src/pipe/export_painter.png" width=100 >




Workflow:
- Subtool 1 to nazwa główna pliku.  subtool = file name

Export
   - `Zplugins>FBXExport>`. Export polygroups as mats.
   - Use GoZ!



# Unreal











### Paths
type of cache
- cache for **sim anim** thet can be deleted OTHER FOR HEAVY CACHE IN SEPARATED CATALOGUE
- cache for next steps in process - necessery
- cache temps. -  raw source files and early preparation / neeeded to recreate file



$HIP/obj/`opname("..")`   
   - /out/$OS.fbx    
   - /img/$OS/${OS}_$(CHANNEL)`chs("udimsuffix")`.png    


|Exports, Cache||
|---|---|
| Export | ```$HIP/`opname("..")`/export/$OS.fbx``` |  
| Cache |```$HIP/`opname("..")`/cache/``` v1/w0/$OS.bgeo.sc  |     
|**Bake**|
| Maps Bake |```$HIP/`opname("..")`/export/bake/${OS}/${OS}_$(CHANNEL).tga``` |   
|**Game**|
|TextureSheet / MorionVector seqence | ```$HIP/`opname("..")`/export/bake/${OS}_sequence/``` |      
|TextureSheet / MorionVector | ```$HIP/`opname("..")`/export/bake/``` |  
|Heightfields | ```$HIP/`opname("..")`/export/heightfields/$OS/``` |
|Vertex Anims ROP |```$HIP/`opname("../..")`/export/vat_$OS``` |       
|Niagara | ``` $HIP/`opname("..")`/export/niagara/$OS.hbjson ``` |
|Impostors| ```$HIP/`opname("..")`/export/${OS}_impostor/sequence/${OS}.$F4.exr``` |
|Impostors| ```$HIP/`opname("..")`/export/${OS}_impostor/${OS}_beauty.exr``` |
|**KineFx**|
|FBX Character Export | ```$HIP/.... .fbx```
|FBX Animation Output | ```$HIP/.... .fbx```  
|**Vellum** |
|Vellum cache | ```$HIP/cache/...```
|**COP**|
|COP image | ```$HIP/`opname("..")`_cop/${OS}.exr```
|Embeded assets| opdef:/Sop/...



|||
|---|---|
|Name from attribute|$HIP/`details("../filecache1","attribute1")`.fbx
|offset 0010-0260  |$HIP/name.`padzero(4,$F-10)`.png  
|range loop 0000-0250 |$HIP/name.`padzero(4,$F%251)`.png    
|range loop 0050-0300 |$HIP/name.`padzero(4,($F-50)%251+50)`.png    
|hold first |$HIP/name.`padzero(4,min($F,250)`.png   
|hold last|$HIP/name.`padzero(4,max($F,1)`.png      
|clamp|$HIP/name.`padzero(4,clamp($F,1,250))`.png  


---

# Unreal Import


<img src="/src/pipe/export_unreal.png">


||SM (def)|VA3||SK|PP2|
|---|---|---|---|---|---|
Skeletal Mesh | | | |On| -
Generate Missing Collision | ||||-
Staticm MeshLODGroup | ||||-
Vert Color |  |Repleace|||Repleace|
Remove Degenerates || | x|| -
Building Adjacency Buffer | || x|| -
Building Reversed Index Buffer | | | x|| -
Generate Lightmap UVs | ||||-
One Convex Hull per UCX | || x||-
Combine Meshes | || x||-
Transform Vertex to Absolut | |On| x|| ?
Import Mesh LOD's || depending on Houdini |||-
Normal Import |  |Import Nm & Tang| Import Nm || ImportNm
Normal Generation | || Mikk TSpace||-
Compute Weighted Normal || | x || -
|.|
Transform|  |1| ||-
|.|
Convert Scene |  |On| x || On
Force Front XAxis  | || || x
Convert Scene to Unit | ||||-
Override Full Name | |On| x||-
|.|
Material | ||||-
Reorder mat to fbx |  | On|||-

with skeleton - update skeleton reference pose - !!!!!!!!! important





----------











<img src="/src/pipe/export_speed.png">




---

# Configs

## Houdini

- desktop .desk
- radial menu
- theme  /config/theme.hcs /inc
- color palete /config/colors.def
- 123.py - default scene change


- Windows: `C:\Users\username\Documents\houdini19.0`
- OSX: `~/Library/Preferences/houdini/houdini19.0`
- Linux: `$HOME/houdini19.0`

**Environment**
 - .env file   
  - `PDG_IMAGEMAGICK=/Applications/ImageMagick-7.0.8/bin/magick`  
  - `PDG_FFMPEG= ""`  
  - `CURVES IN EDITOR: python2.7libs fcurves.py 3 files / HSITE = ""`     
  - `HOUDINI_EXTERNAL_HELP_BROWSER = 1`
**Packages**
  - newer is `/houdini19.0/packages/` folder - can be many files
    - create .json file

**DefaultScene**
 - `C:\Program Files\Side Effects Software\Houdini 19.5.534\houdini\scripts`
 - `Houdini 19.5.xxx/houdini/scripts/123.cmd` or create: `123.py` with python code: `hou.hipFile.merge("..path/to/default/file/file.hip")`
 `hou.hipFile.merge("//moth/library/houdini/DefaultScene.hiplc")`



 #### Substance

 (*.spexp - E:\Documents\Allegorithmic\Substance Painter\shelf\export-presets)  

---

```
##### read verticles uv
veets on Smooth edges, no uvs = 100% vertex  
`hard edges` - make new vert count
`uv` - also contribute.
hard edges should be where uvs - (ver count)
`vertex color` - to memory cost but not vertex cost.
'rendering passes' - (occl, shadow depths, shadow projection)
```

```
# Digital Assets

#### Asset node
RMB on node >
- `Create digital Asset`...  
- `Digital Asset` >
  - create new:  
  - preferences:   

- `Digital Asset` >
  - save as
  - Increasing major

- `Allow Editing`
- `Match Definition`
- ``

----
```

---

# HQueque

1. Instal
 - HQueque Client
 - HQueque Server
2. go to services > properties: login to network
3. go to localhost:5000
 -  
4. Share forlder
 - folder properties: advance sharing, - permitions:
5. hqserver.ini
 - to jest config, can send mails, folder configs
6. licencje
7. Houdini
 - Taget HFS
   - $HQROOT - basic path
---


# Linux setup

### Run Houdini on ubuntu

1. `source houdini_setup` The Houdini 19.0.589 environment has been initialized.
2. `export LD_PRELOAD="/lib/x86_64-linux-gnu/libc_malloc_debug.so.0"`
3. `houdini`


- `sudo apt update`   
- `sudo apt install ffmpeg`   
- `sudo apt install imagemagick`   


# P4
- `Accept Source` GEt clean file from repo, discarding your changes.  
- `Accept Target` Accepts the file local, overwriting repo.  


# Atom

ctrl + t  =  search file names   
ctrl + f  =  search    
ctrl + shift + f = in whole project    
ctrl + /  =  show tree   


http://fxnomemo.blogspot.com/2021/04/houdini-workflow.html

Using file cache with rop geo TOP. with sequences choose automatic

# Naming Conventions
- camelCase, CapitalCamelCase - in pascal   
- flatcase  
- caterpillar-case - css
- snake_case - c  
- MACRO_CASE, UPPER_CASE -  (C preprocessor macros)   
- COBOL-CASE, TRAIN-CASE -     
- python vars
- code names (hard to see space)
- Use `_` to separate parameters in names.

Syntax - red green yellow      
Semantic - green=go, red=stop    
Paradigm -  If red and no traffic then allowed to go     

code =  syntax /
structuring /
understand = machinery





-----------------------------------

Pivot Painter 2. hierarchy:
-

2 groups ?



POINTS:
- point names
- N
GEO:
- point name
- uv
- group: branch
- group: leaf
